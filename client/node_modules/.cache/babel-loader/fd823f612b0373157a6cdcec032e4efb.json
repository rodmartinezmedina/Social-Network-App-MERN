{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rodrigomac/WEB-DEVELOPMENT/REACT-PROJECTS/Social-Network-App-MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rodrigomac/WEB-DEVELOPMENT/REACT-PROJECTS/Social-Network-App-MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{setAlert}from\"./alert\";import{GET_PROFILE,GET_PROFILES,PROFILE_ERROR,CLEAR_PROFILE,UPDATE_PROFILE,ACCOUNT_DELETED,GET_REPOS,NO_REPOS}from\"./types\";//Get current users profile\nexport var getCurrentProfile=function getCurrentProfile(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/profile/me\");case 3:res=_context.sent;dispatch({type:GET_PROFILE,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);// dispatch({ type: CLEAR_PROFILE });\ndispatch({// type: NO_REPOS,\ntype:PROFILE_ERROR,// we have error in the state. we get the error message text\npayload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};//Get all profiles\nexport var getProfiles=function getProfiles(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:CLEAR_PROFILE});_context2.prev=1;_context2.next=4;return axios.get(\"/api/profile\");case 4:res=_context2.sent;dispatch({type:GET_PROFILES,payload:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:PROFILE_ERROR,// we have error in the state. we get the error message text\npayload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};//Get Profile by ID (by userID not by profile Id )\nexport var getProfileById=function getProfileById(userId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"/api/profile/user/\".concat(userId));case 3:res=_context3.sent;dispatch({type:GET_PROFILE,payload:res.data});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch({type:PROFILE_ERROR,// we have error in the state. we get the error message text\npayload:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};//Get Githubrepos\nexport var getGithubRepos=function getGithubRepos(username){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(\"/api/profile/github/\".concat(username));case 3:res=_context4.sent;dispatch({type:GET_REPOS,payload:res.data});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:NO_REPOS// type: PROFILE_ERROR,\n// // we have error in the state. we get the error message text\n// payload: {\n//   msg: err.response.statusText,\n//   status: err.response.status,\n// },\n});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};//Create or update a profile\n//history object has method push that redirects us to a client side route\n//to know if we are creating or updating we set a parameter edit(false by default)\n//we could also create 2 different funcs to create and update\nexport var createProfile=function createProfile(formData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;//config always because we are sending data\nconfig={headers:{\"Content-Type\":\"application/json\"}};//post request to /api/profile\n_context5.next=4;return axios.post(\"/api/profile\",formData,config);case 4:res=_context5.sent;//payload will be the res.data that will actually be the profile\ndispatch({type:GET_PROFILE,payload:res.data});dispatch(setAlert(edit?\"Profile Updated\":\"Profile Created\",\"success\"));//For redirecting in an action we cant do it with the Redirect component\n// So we have to pass it the history object that has the push method on it\nif(!edit){history.push(\"/dashboard\");}_context5.next=15;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](0);errors=_context5.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"danger\"));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[0,10]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};//\n//Add Experience\n//\nexport var addExperience=function addExperience(formData,history){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;//config always because we are sending data\nconfig={headers:{\"Content-Type\":\"application/json\"}};_context6.next=4;return axios.put(\"/api/profile/experience\",formData,config);case 4:res=_context6.sent;//payload will be the res.data that will actually be the profile\ndispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert(\"Experience Added\",\"success\"));//For redirecting in an action we cant do it with the Redirect component\n// So we have to pass it the history object that has the push method on it\nhistory.push(\"/dashboard\");_context6.next=15;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](0);errors=_context6.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"danger\"));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context6.t0.response.statusText,status:_context6.t0.response.status}});case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[0,10]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};//\n//Add Education\n//\nexport var addEducation=function addEducation(formData,history){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;//config always because we are sending data\nconfig={headers:{\"Content-Type\":\"application/json\"}};_context7.next=4;return axios.put(\"/api/profile/education\",formData,config);case 4:res=_context7.sent;//payload will be the res.data that will actually be the profile\ndispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert(\"Education Added\",\"success\"));//For redirecting in an action we cant do it with the Redirect component\n// So we have to pass it the history object that has the push method on it\nhistory.push(\"/dashboard\");_context7.next=15;break;case 10:_context7.prev=10;_context7.t0=_context7[\"catch\"](0);errors=_context7.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"danger\"));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context7.t0.response.statusText,status:_context7.t0.response.status}});case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[0,10]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};//Delete experience\nexport var deleteExperience=function deleteExperience(id){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!window.confirm(\"Are you sure you want to DELETE THIS EXPERIENCE? \")){_context8.next=12;break;}_context8.prev=1;_context8.next=4;return axios.delete(\"/api/profile/experience/\".concat(id));case 4:res=_context8.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert(\"Experience Removed\",\"success\"));_context8.next=12;break;case 9:_context8.prev=9;_context8.t0=_context8[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context8.t0.response.statusText,status:_context8.t0.response.status}});case 12:case\"end\":return _context8.stop();}}},_callee8,null,[[1,9]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};//Delete Education\nexport var deleteEducation=function deleteEducation(id){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!window.confirm(\"Are you sure you want to DELETE THIS EDUCATION? \")){_context9.next=12;break;}_context9.prev=1;_context9.next=4;return axios.delete(\"/api/profile/education/\".concat(id));case 4:res=_context9.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert(\"Education Removed\",\"success\"));_context9.next=12;break;case 9:_context9.prev=9;_context9.t0=_context9[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context9.t0.response.statusText,status:_context9.t0.response.status}});case 12:case\"end\":return _context9.stop();}}},_callee9,null,[[1,9]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};//Delete account & profile\nexport var deleteAccount=function deleteAccount(id){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!window.confirm(\"Are you sure you want to DELETE YOUR ACCOUNT? This can NOT be undone\")){_context10.next=12;break;}_context10.prev=1;_context10.next=4;return axios.delete(\"/api/profile\");case 4:dispatch({type:CLEAR_PROFILE});dispatch({type:ACCOUNT_DELETED});dispatch(setAlert(\"Your acount has been permanently deleted\",\"success\"));_context10.next=12;break;case 9:_context10.prev=9;_context10.t0=_context10[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context10.t0.response.statusText,status:_context10.t0.response.status}});case 12:case\"end\":return _context10.stop();}}},_callee10,null,[[1,9]]);}));return function(_x10){return _ref10.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/rodrigomac/WEB-DEVELOPMENT/REACT-PROJECTS/Social-Network-App-MERN/client/src/actions/profile.js"],"names":["axios","setAlert","GET_PROFILE","GET_PROFILES","PROFILE_ERROR","CLEAR_PROFILE","UPDATE_PROFILE","ACCOUNT_DELETED","GET_REPOS","NO_REPOS","getCurrentProfile","dispatch","get","res","type","payload","data","msg","response","statusText","status","getProfiles","getProfileById","userId","getGithubRepos","username","createProfile","formData","history","edit","config","headers","post","push","errors","forEach","error","addExperience","put","addEducation","deleteExperience","id","window","confirm","delete","deleteEducation","deleteAccount"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { setAlert } from \"./alert\";\n\nimport {\n  GET_PROFILE,\n  GET_PROFILES,\n  PROFILE_ERROR,\n  CLEAR_PROFILE,\n  UPDATE_PROFILE,\n  ACCOUNT_DELETED,\n  GET_REPOS,\n  NO_REPOS,\n} from \"./types\";\n\n//Get current users profile\nexport const getCurrentProfile = () => async (dispatch) => {\n  //we wanna hit GET api/profile/me with whatever user is logged in user:req.user.id\n  try {\n    const res = await axios.get(\"/api/profile/me\");\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data,\n    });\n  } catch (err) {\n    // dispatch({ type: CLEAR_PROFILE });\n\n    dispatch({\n      // type: NO_REPOS,\n      type: PROFILE_ERROR,\n      // we have error in the state. we get the error message text\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\n//Get all profiles\nexport const getProfiles = () => async (dispatch) => {\n  dispatch({ type: CLEAR_PROFILE });\n\n  try {\n    const res = await axios.get(\"/api/profile\");\n\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      // we have error in the state. we get the error message text\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\n//Get Profile by ID (by userID not by profile Id )\nexport const getProfileById = (userId) => async (dispatch) => {\n  try {\n    const res = await axios.get(`/api/profile/user/${userId}`);\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      // we have error in the state. we get the error message text\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status,\n      },\n    });\n  }\n};\n\n//Get Githubrepos\nexport const getGithubRepos = (username) => async (dispatch) => {\n  try {\n    const res = await axios.get(`/api/profile/github/${username}`);\n\n    dispatch({\n      type: GET_REPOS,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: NO_REPOS,\n      // type: PROFILE_ERROR,\n      // // we have error in the state. we get the error message text\n      // payload: {\n      //   msg: err.response.statusText,\n      //   status: err.response.status,\n      // },\n    });\n  }\n};\n\n//Create or update a profile\n//history object has method push that redirects us to a client side route\n//to know if we are creating or updating we set a parameter edit(false by default)\n//we could also create 2 different funcs to create and update\nexport const createProfile = (formData, history, edit = false) => async (\n  dispatch\n) => {\n  try {\n    //config always because we are sending data\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    //post request to /api/profile\n    const res = await axios.post(\"/api/profile\", formData, config);\n\n    //payload will be the res.data that will actually be the profile\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert(edit ? \"Profile Updated\" : \"Profile Created\", \"success\"));\n\n    //For redirecting in an action we cant do it with the Redirect component\n    // So we have to pass it the history object that has the push method on it\n    if (!edit) {\n      history.push(\"/dashboard\");\n    }\n  } catch (err) {\n    const errors = err.response.data.errors;\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, \"danger\")));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n//\n//Add Experience\n//\nexport const addExperience = (formData, history) => async (dispatch) => {\n  try {\n    //config always because we are sending data\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    const res = await axios.put(\"/api/profile/experience\", formData, config);\n\n    //payload will be the res.data that will actually be the profile\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n    dispatch(setAlert(\"Experience Added\", \"success\"));\n\n    //For redirecting in an action we cant do it with the Redirect component\n    // So we have to pass it the history object that has the push method on it\n    history.push(\"/dashboard\");\n  } catch (err) {\n    const errors = err.response.data.errors;\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, \"danger\")));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n//\n//Add Education\n//\nexport const addEducation = (formData, history) => async (dispatch) => {\n  try {\n    //config always because we are sending data\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    const res = await axios.put(\"/api/profile/education\", formData, config);\n\n    //payload will be the res.data that will actually be the profile\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n    dispatch(setAlert(\"Education Added\", \"success\"));\n\n    //For redirecting in an action we cant do it with the Redirect component\n    // So we have to pass it the history object that has the push method on it\n    history.push(\"/dashboard\");\n  } catch (err) {\n    const errors = err.response.data.errors;\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, \"danger\")));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n//Delete experience\nexport const deleteExperience = (id) => async (dispatch) => {\n  if (\n    window.confirm(\n      \"Are you sure you want to DELETE THIS EXPERIENCE? \"\n    )\n  ) {\n  try {\n    const res = await axios.delete(`/api/profile/experience/${id}`);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n    dispatch(setAlert(\"Experience Removed\", \"success\"));\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n}\n};\n\n//Delete Education\nexport const deleteEducation = (id) => async (dispatch) => {\n  if (\n    window.confirm(\n      \"Are you sure you want to DELETE THIS EDUCATION? \"\n    )\n  ) {\n  try {\n    const res = await axios.delete(`/api/profile/education/${id}`);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n    dispatch(setAlert(\"Education Removed\", \"success\"));\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }}\n};\n\n//Delete account & profile\nexport const deleteAccount = (id) => async (dispatch) => {\n  if (\n    window.confirm(\n      \"Are you sure you want to DELETE YOUR ACCOUNT? This can NOT be undone\"\n    )\n  ) {\n    try {\n      await axios.delete(`/api/profile`);\n\n      dispatch({\n        type: CLEAR_PROFILE,\n      });\n      dispatch({\n        type: ACCOUNT_DELETED,\n      });\n      dispatch(setAlert(\"Your acount has been permanently deleted\", \"success\"));\n    } catch (err) {\n      dispatch({\n        type: PROFILE_ERROR,\n        payload: { msg: err.response.statusText, status: err.response.status },\n      });\n    }\n  }\n};\n"]},"metadata":{},"sourceType":"module"}